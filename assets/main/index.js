System.register("chunks:///_virtual/ai.ts",["cc","./NHWC.ts"],(function(t){var c,n;return{setters:[function(t){c=t.cclegacy},function(t){n=t.unow}],execute:function(){t("act",(function(t,c){for(var a=0;a<t.actionData.length;a++){var e=t.actionData[a],i=t.template.actions[a];if(0!=e.charges&&n()>=e.activeWhen)return e.activeWhen=n()+i.cooldown,e.charges--,void i.action(c,e)}})),c._RF.push({},"2056bHoSc9AZp1ZbsVj6KXv","ai",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/Card.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NHWC.ts","./rng.ts"],(function(t){var e,n,i,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){i=t.healPlayer},function(t){a=t.$d}],execute:function(){t({dToRange:s,simpleDamage:function(t){var e=s(t);return function(n){null!=n.detail||(n.detail=[]),n.detail.push("deal "+e.min+"-"+e.max+" damage"),n.actions.push((function(e){var n=a(t);e.pushStep({damage:{value:{raw:n},target:e.target.unit}})}))}},simpleHealing:function(t){var e=s(t);return function(n){null!=n.detail||(n.detail=[]),n.detail.push("restore "+e.min+"-"+e.max+" hitpoints"),n.actions.push((function(e){i(a(t)),e.pushStep({healPlayer:a(t)})}))}}}),n._RF.push({},"12753qz7YtCA6x1Psozdu8/","Card",void 0);t("CardTemplate",function(){function t(t,e){for(var n in this.name="",this.useCharges=-1,this.time=4,this.detail=void 0,this.actions=new Array,this.targeting="unit",this.name=t,e)this[n]=e[n]}return t.prototype.with=function(t){return t(this),this},t}()),t("CardInstance",function(){function t(t){this.template=void 0,this.identifier=0,this.rebound=!1,this.useCharges=0,this.template=t,this.useCharges=this.template.useCharges}return t.prototype.onDraw=function(){},e(t,[{key:"name",get:function(){return this.template.name}}]),t}());function s(t){var e,n,i=null!=(e=t.n)?e:1,a=null!=(n=t.bonus)?n:0;return{min:a+i,max:a+i*t.d}}n._RF.pop()}}}));

System.register("chunks:///_virtual/CombatView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HandView.ts","./NHWC.ts","./UnitView.ts","./Unit.ts","./Units.ts","./OrbView.ts","./TimelineView.ts"],(function(e){var t,n,i,r,a,o,s,d,l,c,h,u,p,g,v,m,f,w,y,b,C,T,V,O,P,x,U,D,F,N,S,_,I,k,z,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose,o=e.createClass,s=e.classPrivateFieldLooseBase,d=e.classPrivateFieldLooseKey},function(e){l=e.cclegacy,c=e._decorator,h=e.Prefab,u=e.SpriteFrame,p=e.Sprite,g=e.Node,v=e.lerp,m=e.UITransform,f=e.Color,w=e.Label,y=e.Vec3,b=e.clamp,C=e.bezier,T=e.Component},function(e){V=e.HandView},function(e){O=e.spawn,P=e.subscribe,x=e.play,U=e.pub,D=e.unow,F=e.u,N=e.beginEncounter,S=e.draw},function(e){_=e.UnitView},function(e){I=e.isFrontRow},function(e){k=e.randomUnit},function(e){z=e.OrbView},function(e){A=e.TimelineView}],execute:function(){var M,B,H,L,R,Y,E,j,G,W;l._RF.push({},"b9157VJ0q5O4oUrxarZY/Uu","CombatView",void 0);var q=c.ccclass,J=c.property;e("CombatView",(M=q("CombatView"),B=J({type:h}),H=J({type:u}),L=J({type:u}),M((W=d("alpha"),E=t((Y=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"card",E,r(t)),i(t,"dragDot",j,r(t)),i(t,"dragArrow",G,r(t)),t.hand=void 0,t.unitViews=new Map,t.currentTarget=null,t.encounterStarted=!1,t.menu=void 0,t.arrow=void 0,t.dots=new Array,t.DOT_COUNT=15,t.playing=null,t.root=void 0,Object.defineProperty(r(t),W,{writable:!0,value:1}),t.animating=!1,t}n(t,e);var d=t.prototype;return d.start=function(){var e=this;this.root=this.getComponent(p),this.alpha=0;for(var t,n=this.node.getChildByName("hp").getComponent(z),i=this.getComponentInChildren(A),r=a(this.node.getComponentsInChildren(_));!(t=r()).done;){var o=t.value;if(o.node.active=!1,I(o.position)){var s=O(k((function(e){return 1==e.level})),o.position);this.unitViews.set(o.position,o),o.setModel(s),o.node.active=!0}}for(var d=0;d<this.DOT_COUNT;d++){var l=d/this.DOT_COUNT,c=new g("dot."+d),h=v(.08,.15,l);c.setScale(h,h,h);var u=c.addComponent(p);u.color.set(255,255,0,255),u.spriteFrame=this.dragDot,c.active=!1,this.node.addChild(c),this.dots.push(u)}var T=new g("arrow");T.addComponent(m).anchorY=0;var N=new g("sprite");N.setScale(.1,.1,.1);var S=N.addComponent(p);S.spriteFrame=this.dragArrow,S.color.set(255,255,0,200),T.addChild(N),T.active=!1,this.node.addChild(T),this.arrow=T;var M=this.node.getChildByName("hand").getComponent(V),B=this.node.getChildByName("deck"),H=this.node.getChildByName("discard");M.cardPrefab=this.card,M.discard=H,M.deck=B.getComponent(p),M.deck.color=f.GRAY,this.hand=M,P("/draw/available",(function(e){M.deck.color=e?f.WHITE:f.GRAY}));var L=B.getComponentInChildren(w),R=H.getComponentInChildren(w),Y=this.node.getChildByName("time").getComponent(w);P("/encounter/complete",(function(){})),P("/card/drag/begin",(function(e){})),P("/card/drag/end",(function(t){var n;if("none"==t.template.targeting){var r=e.hand.byId.get(t.identifier);r.node.position.y-r.peekPos.y>200&&(n={unit:void 0})}else{var o=e.currentTarget;o&&(o.border.state="normal",n={unit:o.model})}n?e.setPlaying(x(t,n)):M.byId.get(t.identifier).reset("cancel"),U("/card/deselect",t);for(var s,d=a(e.dots);!(s=d()).done;){s.value.node.active=!1}e.arrow.active=!1,e.currentTarget=null,U("/preview",null),i.highlight(null,-1)})),P("/card/drag",(function(t){var n,r=t.card,o=t.root,s=t.pos,d=!1;if("none"==r.template.targeting)d=!0;else{var l=new y(s.x,s.y,0),c=new y,h=e.node.inverseTransformPoint(new y,o);e.node.inverseTransformPoint(c,l),e.currentTarget=null;for(var u=b(h.x-c.x,-90,90),p=Math.abs(u)-90,g=[h.x,h.x,c.x+u,c.x+.3*u],v=[h.y,h.y+120,c.y+.3*p,c.y+.3*p],f=0;f<e.DOT_COUNT;f++){var w=(f+1)/(e.DOT_COUNT+1),T=C(g[0],g[1],g[2],g[3],w),V=C(v[0],v[1],v[2],v[3],w),O=e.dots[f];O.node.setPosition(T,V,0),O.node.active=!0}e.arrow.setPosition(c.x,c.y,0),e.arrow.setRotationFromEuler(0,0,u),e.arrow.active=!0;for(var P,x=a(e.unitViews.values());!(P=x()).done;){var F=P.value;if(F.node.active){var N=F.getComponent(m).contentSize;F.main.node.inverseTransformPoint(c,l),Math.abs(c.x)<N.width&&Math.abs(c.y)<N.height?(e.currentTarget=F,d=!0,F.border.state="hover"):F.border.state="normal"}}}U("/preview",d?{at:D()+r.template.time}:null),i.highlight(null==(n=e.currentTarget)?void 0:n.model,r.template.time)}));var E=!1;P("/u/health_gained",(function(e){n.norm=e.now/F.hpMax})),P("/u/health_lost",(function(e){n.norm=e.now/F.hpMax,e.now<=0&&!E&&(E=!0)})),P("/card/draw",(function(){L.string=F.deck.length.toString(),R.string=F.discard.length.toString()})),P("/card/discard",(function(){R.string=F.discard.length.toString()})),P("/time",(function(e){Y.string="T: "+e}))},d.setPlaying=function(e){this.playing=e,this.hand.setDisabled(null!=e)},d.update=function(e){this.encounterStarted||(N(),this.encounterStarted=!0);var t=this.playing;if(t&&!this.animating){var n=t.step();if(!n)return void this.setPlaying(null);n.damage,this.stallFor(.25)}1==F.hand.size&&F.hand.has(F.mhand.template.weapon)&&F.drawAvailable&&S(),this.hand.dragging},d.stallFor=function(e){var t=this;this.animating=!0,this.scheduleOnce((function(){return t.animating=!1}),e)},o(t,[{key:"alpha",get:function(){return s(this,W)[W]},set:function(e){s(this,W)[W]=e,this.root.color=this.root.color.set(255,255,255,255*e)}}]),t}(T)).prototype,"card",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(Y.prototype,"dragDot",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(Y.prototype,"dragArrow",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=Y))||R));l._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/EquipCardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EquipmentView.ts"],(function(e){var t,i,r,n,l,a,o,u,s,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,o=e.Label,u=e.Sprite,s=e.RichText,c=e.Component},function(e){p=e.renderDetails}],execute:function(){var b,d,f,g,y,h,m,w,E,v,z;l._RF.push({},"95b02ElLQxFBbPl4grUEYrx","EquipCardView",void 0);var q=a.ccclass,C=a.type;e("EquipCardView",(b=q("EquipCardView"),d=C(o),f=C(o),g=C(u),y=C(s),b((w=t((m=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,r(t,"cost",w,n(t)),r(t,"title",E,n(t)),r(t,"art",v,n(t)),r(t,"details",z,n(t)),t}return i(t,e),t.prototype.setModel=function(e){this.title.string=e.name,this.details.string=p(e.template.detail,{isRebound:e.rebound}),this.cost.string=e.template.time.toString()},t}(c)).prototype,"cost",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(m.prototype,"title",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(m.prototype,"art",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(m.prototype,"details",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=m))||h));l._RF.pop()}}}));

System.register("chunks:///_virtual/EquipmentSlotView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HandCardView.ts","./InventorySlotView.ts"],(function(e){var t,i,n,r,o,a,l,c,s,p,u;return{setters:[function(e){t=e.inheritsLoose,i=e.applyDecoratedDescriptor,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Sprite,c=e.Component,s=e.UITransform},function(e){p=e.Hoverable},function(e){u=e.makeItemAsset}],execute:function(){var h,m,f,y,b,g,d,v,w;o._RF.push({},"43063WSEXBHxoz8KHl0wrEb","EquipmentSlotView",void 0);var S=a.ccclass,z=(a.property,a.type),V=e("HoverableView",function(e){function i(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).hover=new p,t}return t(i,e),i}(c));e("EquipmentSlotView",(h=S("EquipmentSlotView"),m=z(l),f=z(l),y=z(l),h((d=i((g=function(e){function i(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"frame",d,r(t)),n(t,"bg",v,r(t)),n(t,"empty",w,r(t)),t.item=void 0,t}t(i,e);var o=i.prototype;return o.start=function(){var e=this.getComponent(s).contentSize;this.frame.getComponent(s).contentSize.set(e.width,e.height),this.bg.getComponent(s).contentSize.set(e.width,e.height)},o.setModel=function(e){var t;this.item!==e&&(this.item=e,e?(this.empty.node.active=!1,u(this.bg.node,e)):(null==(t=this.bg.node.children[0])||t.destroy(),this.empty.node.active=!0))},i}(V)).prototype,"frame",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=i(g.prototype,"bg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=i(g.prototype,"empty",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=g))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/EquipmentView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NHWC.ts","./EquipmentSlotView.ts","./InventorySlotView.ts","./FadeView.ts","./EquipCardView.ts"],(function(e){var t,i,o,n,l,r,a,s,u,d,f,c,p,b,h,g,m,y,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.createForOfIteratorHelperLoose,o=e.inheritsLoose,n=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.RichText,u=e.Label,d=e.Node,f=e.Prefab,c=e.Component,p=e.instantiate,b=e.NodeEventType},function(e){h=e.u},function(e){g=e.EquipmentSlotView},function(e){m=e.InventorySlotView},function(e){y=e.FadeView},function(e){v=e.EquipCardView}],execute:function(){var w,E,z,M,R,S,T,V,A,C,H,I,q,L,O,_,P,F,N,D,U,j,G,k,x,B,J,K,W,Q,X,Y,Z,$,ee;e("renderDetails",oe),r._RF.push({},"31280PaTMBC0K9TJEjF7v0l","EquipmentView",void 0);var te=a.ccclass,ie=(a.property,a.type);e("EquipmentView",(w=te("EquipmentView"),E=ie(s),z=ie(u),M=ie(d),R=ie(d),S=ie(u),T=ie(d),V=ie(g),A=ie(g),C=ie(g),H=ie(g),I=ie(g),q=ie(g),L=ie(g),O=ie(g),_=ie(g),P=ie(f),w((D=t((N=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"details",D,l(t)),n(t,"infoTitle",U,l(t)),n(t,"infoRoot",j,l(t)),n(t,"added",G,l(t)),n(t,"addedTitle",k,l(t)),n(t,"grid",x,l(t)),n(t,"slotHat",B,l(t)),n(t,"slotAmulet",J,l(t)),n(t,"slotGloves",K,l(t)),n(t,"slotArmor",W,l(t)),n(t,"slotShoes",Q,l(t)),n(t,"slotMainHand",X,l(t)),n(t,"slotOffHand",Y,l(t)),n(t,"slotRingLeft",Z,l(t)),n(t,"slotRingRight",$,l(t)),n(t,"inventorySlotPrefab",ee,l(t)),t.slots=new Array,t}o(t,e);var r=t.prototype;return r.start=function(){for(var e=this,t=function(){var t=p(e.inventorySlotPrefab),i=t.getComponent(m);i.node.on(b.MOUSE_ENTER,(function(t){e.showInfo(i.item)})),i.node.on(b.MOUSE_LEAVE,(function(t){e.showInfo(null)})),e.slots.push(i),e.grid.addChild(t)},o=0;o<h.inventorySize;o++)t();for(var n,l=function(){var t=n.value;t.node.on(b.MOUSE_ENTER,(function(i){e.showInfo(t.item)})),t.node.on(b.MOUSE_LEAVE,(function(t){e.showInfo(null)}))},r=i(this.getComponentsInChildren(g));!(n=r()).done;)l();this.getComponent(y).onActivate=function(){return e.sync()},this.sync()},r.showInfo=function(e){if(e){e.template.isEquipment&&!e.slot?this.addedTitle.string="Cards Added [when equipped]":this.addedTitle.string="Cards Added",this.infoRoot.active=!0,this.infoTitle.string=e.name,this.details.string=oe(e.template.detail,{});for(var t=0;t<e.cards.length;t++)this.added.children[t].active=!0,this.added.children[t].getComponent(v).setModel(e.cards[t]);for(var i=e.cards.length;i<10;i++)this.added.children[i].active=!1}else this.infoRoot.active=!1},r.sync=function(){for(var e,t=i(h.items());!(e=t()).done;){var o=e.value,n=o[0],l=o[1];this.slots[n].setItem(l)}this.slotAmulet.setModel(h.slots.get("neck")),this.slotArmor.setModel(h.slots.get("body")),this.slotGloves.setModel(h.slots.get("hands")),this.slotHat.setModel(h.slots.get("head")),this.slotMainHand.setModel(h.slots.get("mhand")),this.slotOffHand.setModel(h.slots.get("ohand")),this.slotRingLeft.setModel(h.slots.get("fingerl")),this.slotRingRight.setModel(h.slots.get("fingerr")),this.slotShoes.setModel(h.slots.get("feet"))},t}(c)).prototype,"details",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(N.prototype,"infoTitle",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(N.prototype,"infoRoot",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(N.prototype,"added",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(N.prototype,"addedTitle",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(N.prototype,"grid",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(N.prototype,"slotHat",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(N.prototype,"slotAmulet",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(N.prototype,"slotGloves",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(N.prototype,"slotArmor",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(N.prototype,"slotShoes",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(N.prototype,"slotMainHand",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(N.prototype,"slotOffHand",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(N.prototype,"slotRingLeft",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(N.prototype,"slotRingRight",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(N.prototype,"inventorySlotPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=N))||F));function oe(e,t){for(var o,n=[],l=i(e);!(o=l()).done;){var r=o.value;n.push(r)}return t.isRebound&&n.push("<bold>rebound</bold>"),n.join("\n")}r._RF.pop()}}}));

System.register("chunks:///_virtual/FadeView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,o,n,a,r,s,c,l,u;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass,o=e.assertThisInitialized,n=e.classPrivateFieldLooseBase,a=e.classPrivateFieldLooseKey},function(e){r=e.cclegacy,s=e._decorator,c=e.Sprite,l=e.Color,u=e.Component}],execute:function(){var h,p;r._RF.push({},"5d9c3GW08tGxIa2ak5dv5HH","FadeView",void 0);var d=s.ccclass,v=(s.property,s.type,s.requireComponent);e("FadeView",d("FadeView")(h=v(c)((p=a("alpha"),h=function(e){function a(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).onActivate=void 0,Object.defineProperty(o(t),p,{writable:!0,value:1}),t}return t(a,e),i(a,[{key:"alpha",get:function(){return n(this,p)[p]},set:function(e){var t;(n(this,p)[p]=e,this.getComponent(c).color=new l(255,255,255,255*e),!this.node.active&&e>0)&&(console.log("ACTIVATE: "+this.name),null==(t=this.onActivate)||t.call(this));this.node.active=e>0}}]),a}(u)))||h)||h);r._RF.pop()}}}));

System.register("chunks:///_virtual/FrameBorder.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,o,i,s,a,l,c,h,u,p,m,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createClass,s=e.classPrivateFieldLooseBase,a=e.classPrivateFieldLooseKey},function(e){l=e.cclegacy,c=e._decorator,h=e.Sprite,u=e.UITransform,p=e.tween,m=e.Color,d=e.Component}],execute:function(){var f,b,y,v,w,g,C,T;l._RF.push({},"dc823Xhg5pKZ4xsrJyDkVtT","FrameBorder",void 0);var F=c.ccclass,k=c.property;e("FrameBorder",(f=F("FrameBorder"),b=k({type:h}),y=k({type:Number}),f((T=a("state"),g=t((w=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,n(t,"main",g,o(t)),t.me=void 0,n(t,"borderThickness",C,o(t)),t.currentTween=null,Object.defineProperty(o(t),T,{writable:!0,value:"normal"}),t}r(t,e);var a=t.prototype;return a.start=function(){var e=this.node.getComponent(u),t=this.main.getComponent(u),r=2*this.borderThickness;e.setContentSize(t.contentSize.x+r,t.contentSize.y+r),0==e.anchorY&&this.node.position.set(0,-this.borderThickness),this.me=this.getComponent(h),this.me.enabled=!1},a.tweenColor=function(e,t,r){var n=this,o={alpha:this.me.color.r,stage:this.me.color.g};return this.currentTween=p(o).to(.12,{alpha:e,stage:t},{onUpdate:function(){n.me.color=new m(o.alpha,o.stage,0,1)},onComplete:r}).start(),this.currentTween},i(t,[{key:"state",set:function(e){var t,r=this;e!=s(this,T)[T]&&(s(this,T)[T]=e,null==(t=this.currentTween)||t.stop(),"hover"==e?(this.me.enabled=!0,this.tweenColor(255,25)):"down"==e?this.tweenColor(255,51):"normal"==e&&this.tweenColor(0,25,(function(){return r.me.enabled=!1})))}}]),t}(d)).prototype,"main",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(w.prototype,"borderThickness",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),v=w))||v));l._RF.pop()}}}));

System.register("chunks:///_virtual/GameView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CombatView.ts","./InGameMenuView.ts","./FadeView.ts","./NHWC.ts","./Testing.ts","./Weapons.ts","./Item.ts"],(function(e){var t,i,n,a,o,r,c,l,u,s,p,m,f,b,h,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,c=e.Node,l=e.tween,u=e.Component},function(e){s=e.CombatView},function(e){p=e.InGameMenuView},function(e){m=e.FadeView},function(e){f=e.u},function(e){b=e.potions},function(e){h=e.testingItems},function(e){g=e.Item}],execute:function(){var v,w,y,d,V,G,I,z,C,F,M;o._RF.push({},"5ba8eWBrCJFH5ZEB5TRF3h5","GameView",void 0);var _=r.ccclass,B=r.property;e("GameView",(v=_("GameView"),w=B({type:s}),y=B({type:p}),d=B({type:c}),V=B({type:c}),v((z=t((I=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"combat",z,a(t)),n(t,"menu",C,a(t)),n(t,"victory",F,a(t)),n(t,"defeat",M,a(t)),t}i(t,e);var o=t.prototype;return o.start=function(){f.equip(new g(h.heavyGloves),"hands"),f.give(new g(h.lightGloves)),f.give(new g(b.healing)),f.give(new g(b.healing)),f.give(new g(b.healing)),this.combat.node.active=!1,this.victory.active=!1,this.defeat.active=!1},o.closeMenu=function(){this.combat.node.active=!0,l(this.menu.getComponent(m)).to(.4,{alpha:0},{easing:"cubicInOut"}).start(),l(this.combat).to(.4,{alpha:1},{easing:"cubicInOut"}).start()},t}(u)).prototype,"combat",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(I.prototype,"menu",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(I.prototype,"victory",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(I.prototype,"defeat",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=I))||G));o._RF.pop()}}}));

System.register("chunks:///_virtual/Hand.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NHWC.ts"],(function(t){var r,e,n,i;return{setters:[function(t){r=t.createForOfIteratorHelperLoose,e=t.createClass},function(t){n=t.cclegacy},function(t){i=t.pub}],execute:function(){var a;n._RF.push({},"dc76bg7E1VGsoxRSH2BBp9O","Hand",void 0),a=Symbol.iterator,t("Hand",function(){function t(){this.maxSize=8,this.cards=new Array}var n=t.prototype;return n.has=function(t){for(var e,n=r(this.cards);!(e=n()).done;){if(e.value.template===t)return!0}return!1},n.remove=function(t,r){var e=this.cards.findIndex((function(r){return r==t}));if(e<0)throw"card not in hand";this.cards.splice(e,1),i("/card/remove_from_hand",{card:t,fate:r})},n.add=function(r){r.identifier=t.nextId++,this.cards.push(r)},n[a]=function(){return this.cards[Symbol.iterator]()},e(t,[{key:"isEmpty",get:function(){return 0==this.cards.length}},{key:"size",get:function(){return this.cards.length}}]),t}()).nextId=1,n._RF.pop()}}}));

System.register("chunks:///_virtual/HandCardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NHWC.ts","./HandView.ts","./FrameBorder.ts"],(function(e){var o,t,n,i,r,s,a,l,d,h,c,u,p,g,v,f,m,b,w,y,E,O;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.createClass,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,l=e._decorator,d=e.Sprite,h=e.Label,c=e.RichText,u=e.Node,p=e.input,g=e.Input,v=e.Tween,f=e.tween,m=e.Vec3,b=e.UITransform,w=e.Component},function(e){y=e.pub},function(e){E=e.HandView},function(e){O=e.FrameBorder}],execute:function(){var S,P,U,C,T,k,D,x,I,H,_;a._RF.push({},"9b358eu9UdAgYgN5OoaH4B8","HandCardView",void 0);var B=l.ccclass,L=l.property,M=(e("HandCardView",(S=B("HandCardView"),P=L({type:d}),U=L({type:h}),C=L({type:c}),T=L({type:h}),S((x=o((D=function(e){function o(){for(var o,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return(o=e.call.apply(e,[this].concat(n))||this).hover=new M,i(o,"frame",x,r(o)),i(o,"title",I,r(o)),i(o,"details",H,r(o)),i(o,"cost",_,r(o)),o.handIndex=0,o.owner=void 0,o.model=void 0,o.originalPos=void 0,o.originalScale=void 0,o.peekPos=void 0,o.moved=!1,o.border=void 0,o.resetOnStart="cancel",o.ready=!1,o.onResetComplete=void 0,o}n(o,e);var a=o.prototype;return a.onDestroy=function(){v.stopAllByTarget(this.node)},a.kill=function(e){var o=this;if(this.hover.onExit(),this.hover.enabled=!1,v.stopAllByTarget(this.node),"destroy"==e||"retain"==e){this.node.getChildByName("cost_badge").destroy(),this.node.getChildByName("cost").destroy();var t=this.frame.color.clone(),n={value:this.frame.color.r};f(n).to(.2,{value:255},{onUpdate:function(e,n){t.r=e.value,o.frame.color=t},onComplete:function(){o.node.destroy()}}).start()}else{var i=this.owner.node.inverseTransformPoint(new m,this.owner.discard.worldPosition);f(this.node).to(.24,{position:i,scale:m.ZERO},{easing:"cubicOut"}).destroySelf().start()}},a.playThenKill=function(e){var o=this;this.hover.onExit(),this.hover.enabled=!1;var t=this.node;v.stopAllByTarget(t),"destroy"!=e?f(t).to(.2,{position:this.peekPos.add3f(0,60,0),scale:this.originalScale.multiplyScalar(1.1)},{onComplete:function(){return o.kill(e)}}).start():this.kill(e)},a.syncWithHand=function(e,o,t){this.handIndex=e;var n=this.node;if(this.originalPos=new m(o,0,0),this.originalScale=new m(.8,.8,.8),"none"!=t||this.ready)if("instant"==t)n.position=this.originalPos.clone();else{var i="fast"==t?.06:.16;f(n).to(i,{position:this.originalPos},{easing:"cubicOut"}).start()}else;this.peekPos=this.originalPos.clone().add3f(0,42,0),this.owner=n.parent.getComponent(E)},a.start=function(){var e,o,t,n,i=this,r=this.node,a=new m;this.title.string=null!=(e=null==(o=this.model)?void 0:o.name)?e:"Panic!",this.cost.string=null!=(t=null==(n=this.model)||null==(n=n.template)?void 0:n.time.toString())?t:"-",this.border=r.getComponentInChildren(O);for(var l,d=[],h=s(this.model.template.detail);!(l=h()).done;){var c=l.value;d.push(c)}this.model.rebound&&d.push("<bold>rebound</bold>"),this.details.string=d.join("\n"),this.hover.install(this.frame.node),this.hover.enabled=!1,this.hover.onEnter=function(){i.border.state="hover",v.stopAllByTarget(i.node),f(r).to(.12,{position:i.peekPos},{easing:"expoOut"}).start(),r.setSiblingIndex(r.parent.children.length-1),y("/card/select",i.model)},this.hover.onDown=function(e){r.parent.inverseTransformPoint(a,new m(e.getUILocationX(),e.getUILocationY(),0)),i.owner.dragging=i,a.subtract(r.position),i.border.state="down",y("/card/drag/begin",i.model)},this.hover.onUp=function(){i.border.state="hover",v.stopAllByTarget(r),y("/card/drag/end",i.model)},this.hover.onExit=function(){i.border.state="normal",f(r).to(.12,{position:i.originalPos},{easing:"expoOut"}).start(),y("/card/deselect",i.model)},this.hover.onDrag=function(e){var o=r.parent.inverseTransformPoint(new m,new m(e.getUILocationX(),e.getUILocationY(),0)),t=o.clone().subtract(a);"none"==i.model.template.targeting&&(r.position=t);o.x,i.originalPos.x;y("/card/drag",{card:i.model,root:r.worldPosition.clone().add3f(0,.8*i.frame.getComponent(b).contentSize.height,0),pos:e.getUILocation()}),i.moved=!0},this.hover.enabled=!1,"cancel"!=this.resetOnStart&&this.reset(this.resetOnStart,this.onResetComplete)},a.resetSoon=function(e,o){this.onResetComplete=o,this.resetOnStart=e},a.reset=function(e,o){var t=this;this.ready=!0,this.owner.dragging==this&&(this.owner.dragging=null),this.border.state="normal",this.hover.noOver=!0,this.hover.enabled=!1;var n=this.node.position.clone().add3f(100,30,0),i=function(){t.hover.enabled=!0,null==o||o()};"deck"==e?f(this.node).to(.2,{position:n,scale:this.originalScale.clone().multiplyScalar(.8)},{easing:"quadIn"}).to(.2,{position:this.originalPos,scale:this.originalScale},{easing:"linear",onComplete:i}).start():"weapon"==e?f(this.node).set({position:this.originalPos.clone().add3f(0,200,0)}).to(.3,{position:this.originalPos,scale:this.originalScale},{easing:"cubicOut",onComplete:i}).start():f(this.node).to(.15,{position:this.originalPos,scale:this.originalScale},{easing:"expoOut",onComplete:i}).start()},t(o,[{key:"selected",get:function(){return this.hover.down}}]),o}(w)).prototype,"frame",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=o(D.prototype,"title",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=o(D.prototype,"details",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=o(D.prototype,"cost",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=D))||k)),e("Hoverable",function(){function e(e){void 0===e&&(e=!0),this.noOver=!1,this.enableDrag=void 0,this.disabled=!1,this.enabled=!0,this.down=!1,this.over=!1,this.onDrag=void 0,this.onDown=void 0,this.onUp=void 0,this.onEnter=void 0,this.onExit=void 0,this.enableDrag=e}return e.prototype.install=function(e){var o=this;e.on(u.EventType.MOUSE_ENTER,(function(e){o.ok&&!o.down&&(o.over=!0,null==o.onEnter||o.onEnter())})),e.on(u.EventType.MOUSE_LEAVE,(function(e){o.ok&&!o.down&&(o.over=!1,o.down=!1,null==o.onExit||o.onExit())})),e.on(u.EventType.MOUSE_MOVE,(function(e){o.ok&&(o.down?null==o.onDrag||o.onDrag(e):o.noOver?(o.over=!1,o.noOver=!1):o.over||(o.over=!0,null==o.onEnter||o.onEnter()))})),this.enableDrag&&(e.on(u.EventType.MOUSE_DOWN,(function(e){o.ok&&!o.down&&(o.down=!0,null==o.onDown||o.onDown(e))})),e.on(u.EventType.MOUSE_UP,(function(e){o.ok&&o.down&&(o.down=!1,null==o.onUp||o.onUp())})),p.on(g.EventType.MOUSE_MOVE,(function(e){o.ok&&o.down&&(null==o.onDrag||o.onDrag(e))})),p.on(g.EventType.MOUSE_UP,(function(e){o.ok&&o.down&&(o.down=!1,null==o.onUp||o.onUp())})))},t(e,[{key:"ok",get:function(){return this.enabled&&!this.disabled}}]),e}()));a._RF.pop()}}}));

System.register("chunks:///_virtual/HandView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HandCardView.ts","./NHWC.ts"],(function(e){var n,r,a,i,t,o,s,d,c,u,l,v;return{setters:[function(e){n=e.inheritsLoose,r=e.createForOfIteratorHelperLoose,a=e.classPrivateFieldLooseBase,i=e.createClass,t=e.classPrivateFieldLooseKey,o=e.assertThisInitialized},function(e){s=e.cclegacy,d=e._decorator,c=e.instantiate,u=e.Component},function(e){l=e.HandCardView},function(e){v=e.subscribe}],execute:function(){var h,f;s._RF.push({},"d82c8vJNypG9Y+r7oCcB3lp","HandView",void 0);var g=d.ccclass;d.property,e("HandView",g("HandView")((f=t("dragging"),h=function(e){function t(){for(var n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,[this].concat(a))||this).cards=new Array,n.cardPrefab=void 0,n.byId=new Map,n.deck=void 0,n.discard=void 0,n.model=void 0,n.animQueue=[],n.animPlaying=!1,Object.defineProperty(o(n),f,{writable:!0,value:null}),n}n(t,e);var s=t.prototype;return s.setDisabled=function(e){for(var n,a=r(this.cards);!(n=a()).done;){n.value.hover.disabled=e}},s.start=function(){var e=this;v("/card/remove_from_hand",(function(n){var r=e.byId.get(n.card.identifier);e.cards.splice(r.handIndex,1),e.dragging=null,e.rearrange("fast"),r.playThenKill(n.fate)})),v("/card/draw",(function(n){if(0!=n.cards.length){for(var a,i=new Array,t=r(n.cards);!(a=t()).done;){var o=a.value,s=e.add(o,n.source);s.node.active=!1,i.push(s)}if(i.reverse(),"deck"==n.source){e.animQueue.push((function(){e.rearrange("none");for(var r=.04,a=function(){var a=i[t];a.node.active=!0,a.node.scale.set(.1,.1,.1);var o=t==i.length-1?function(){return e.animPlaying=!1}:void 0;e.scheduleOnce((function(){a.reset(n.source,o)}),r),r+=.08},t=0;t<i.length;t++)a()}))}else{e.animQueue.push((function(){e.rearrange("none"),i[0].node.active=!0,i[0].resetSoon(n.source,(function(){return e.animPlaying=!1}))}))}}})),document.getElementById("GameDiv").addEventListener("mouseleave",(function(n){a(e,f)[f]&&(a(e,f)[f].hover.down=!1,a(e,f)[f].hover.onUp())}))},s.update=function(e){if(!this.animPlaying&&this.animQueue.length>0){this.animPlaying=!0;var n=this.animQueue[0];this.animQueue.splice(0,1),n()}},s.add=function(e,n){var r=c(this.cardPrefab),a=r.getComponent(l);return this.node.addChild(r),a.model=e,"deck"==n&&this.node.inverseTransformPoint(r.position,this.deck.node.worldPosition),this.cards.push(a),this.byId.set(e.identifier,a),a},s.rearrange=function(e){for(var n=this.cards.length,r=-n/2*150+75,a=0;a<n;a++){this.cards[a].syncWithHand(a,r+150*a,e)}},i(t,[{key:"dragging",get:function(){return a(this,f)[f]},set:function(e){if(a(this,f)[f]=e,e)for(var n,i=r(this.cards);!(n=i()).done;){var t=n.value;t!=e&&(t.hover.enabled=!1)}else for(var o,s=r(this.cards);!(o=s()).done;){o.value.hover.enabled=!0}}}]),t}(u)))||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/InGameMenuView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameView.ts","./FadeView.ts"],(function(t){var e,n,i,o,r,a,u,c,l,p,s,h,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,u=t.Color,c=t.Button,l=t.tween,p=t.Sprite,s=t.Component},function(t){h=t.GameView},function(t){b=t.FadeView}],execute:function(){var g,m,f,w,D,v,y,d,k,z,C,V,q,B,E,G,M;r._RF.push({},"428d0perWtNBZcbL4opzRmY","InGameMenuView",void 0);var I=a.ccclass,x=(a.property,a.type),F=new u(200,200,200,255),_=new u(180,180,255,255);t("InGameMenuView",(g=I("InGameMenuView"),m=x(c),f=x(c),w=x(b),D=x(c),v=x(b),y=x(c),d=x(b),g((C=e((z=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).game=void 0,e.root=void 0,i(e,"exit",C,o(e)),i(e,"tabEquipment",V,o(e)),i(e,"contentEquip",q,o(e)),i(e,"tabDungeon",B,o(e)),i(e,"contentDungeon",E,o(e)),i(e,"tabDeck",G,o(e)),i(e,"contentDeck",M,o(e)),e.current=void 0,e.currentButton=void 0,e}n(e,t);var r=e.prototype;return r.setActive=function(t,e){if(e!==this.current){var n=this.current,i=this.currentButton;l(n).to(.2,{alpha:0}).start(),l(e).to(.2,{alpha:1}).start(),i.getComponent(p).color=F,t.getComponent(p).color=_,this.currentButton=t,this.current=e}},r.start=function(){var t=this;this.game=this.node.parent.getComponent(h),this.current=this.contentDungeon,this.currentButton=this.tabDungeon,this.exit.node.on("click",(function(){t.game.closeMenu()}));var e=function(e,n){e.node.on("click",(function(){t.setActive(e,n)}))};this.contentEquip.getComponent(b).alpha=0,this.contentDeck.getComponent(b).alpha=0,this.contentDungeon.getComponent(b).alpha=1,e(this.tabDungeon,this.contentDungeon),e(this.tabDeck,this.contentDeck),e(this.tabEquipment,this.contentEquip)},e}(s)).prototype,"exit",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(z.prototype,"tabEquipment",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(z.prototype,"contentEquip",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(z.prototype,"tabDungeon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(z.prototype,"contentDungeon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(z.prototype,"tabDeck",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(z.prototype,"contentDeck",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=z))||k));r._RF.pop()}}}));

System.register("chunks:///_virtual/InventorySlotView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,r,i,a,s,c,l,p;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.resources,i=t.Prefab,a=t.instantiate,s=t.SpriteFrame,c=t.Node,l=t.Sprite,p=t.Component}],execute:function(){var u;t("makeItemAsset",m),n._RF.push({},"a3b0aO0L/NESobwtBa0wjxg","InventorySlotView",void 0);var d=o.ccclass;o.property,o.type,t("InventorySlotView",d("InventorySlotView")(u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).item=void 0,e}e(n,t);var o=n.prototype;return o.start=function(){},o.setItem=function(t){var e;t!==this.item&&(this.item=t,t?m(this.node,t):null==(e=this.node.children[0])||e.destroy())},n}(p))||u);function m(t,e){"potion"==e.template.type?r.load("items/pot",i,(function(e,n){t.addChild(a(n))})):"gloves"==e.template.type&&r.load("items/gloves/spriteFrame",s,(function(e,n){var o=new c;o.addComponent(l).spriteFrame=n,t.addChild(o)}))}n._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Card.ts","./rng.ts"],(function(t){var e,n,r,i,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){r=t.CardTemplate,i=t.CardInstance},function(t){a=t.rnd}],execute:function(){t({mkitem:function(t,e){var n=new u;n.name=t,n.type=e,n.isEquipment&&(n.invTemplate=new r(t,{time:1,detail:["un-equipped items","are a burden"],targeting:"none",actions:[function(t){t.pushStep({})}]}));for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];for(var c=0,o=a;c<o.length;c++)for(var h,p=o[c],m=null!=(h=p.count)?h:1,d=0;d<m;d++)n.cards.push(p.card);return n},multi:function(t,e){return{count:t,card:e}}}),n._RF.push({},"ec99bk+N55J3orEFphyGUIj","Item",void 0);var s=new Set(["wand","chest","hat","ring","gloves","shoes","weap1","weap2","shield","amulet"]),u=t("ItemTemplate",function(){function t(){this.type="misc",this.maxCharges=void 0,this.cards=new Array,this.detail=new Array,this.name=void 0,this.invTemplate=void 0}return t.prototype.describe=function(t){return this.detail.push(t),this},e(t,[{key:"weapon",get:function(){return this.cards[0]}},{key:"isEquipment",get:function(){return s.has(this.type)}}]),t}());t("Item",function(){function t(t){this.template=void 0,this.charges=0,this.slot=void 0,this.cards=new Array,this.template=t,this.charges=a(t.maxCharges),this.cards=t.cards.map((function(t){return new i(t)}))}return e(t,[{key:"name",get:function(){return this.template.name}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./CombatView.ts","./EquipCardView.ts","./EquipmentSlotView.ts","./EquipmentView.ts","./FadeView.ts","./FrameBorder.ts","./GameView.ts","./HandCardView.ts","./HandView.ts","./InGameMenuView.ts","./InventorySlotView.ts","./MenuEquipmentCardView.ts","./OrbView.ts","./PotionView.ts","./TimelineView.ts","./UnitGallery.ts","./UnitView.ts","./Card.ts","./Hand.ts","./Item.ts","./NHWC.ts","./PlayConductor.ts","./Unit.ts","./ai.ts","./Testing.ts","./Units.ts","./Weapons.ts","./rng.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MenuEquipmentCardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HandCardView.ts"],(function(e){var n,t,r,i,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,r=e._decorator,i=e.Component},function(e){o=e.Hoverable}],execute:function(){var u;t._RF.push({},"7c1a4LTF8xKTJixeX9cDGNC","MenuEquipmentCardView",void 0);var c=r.ccclass;r.property,e("MenuEquipmentCardView",c("MenuEquipmentCardView")(u=function(e){function t(){for(var n,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(n=e.call.apply(e,[this].concat(r))||this).hover=new o,n}return n(t,e),t.prototype.start=function(){this.hover.install(this.node),this.hover.onEnter=function(){}},t}(i))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/NHWC.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Card.ts","./Weapons.ts","./Hand.ts","./Item.ts","./PlayConductor.ts","./rng.ts","./Unit.ts"],(function(e){var n,t,a,r,i,o,s,u,c,d,h,l,f;return{setters:[function(e){n=e.regeneratorRuntime,t=e.classPrivateFieldLooseBase,a=e.createClass,r=e.createForOfIteratorHelperLoose,i=e.classPrivateFieldLooseKey},function(e){o=e.cclegacy},function(e){s=e.CardInstance},function(e){u=e.weapons},function(e){c=e.Hand},function(e){d=e.Item},function(e){h=e.PlayConductor},function(e){l=e.$d},function(e){f=e.Unit}],execute:function(){e({advertise:function(e){return new C(e)},allUnits:g,beginEncounter:function(){P.mhand||P.equip(new d(u.fists),"mhand");for(var e,n=r(P.items());!(e=n()).done;){var t=e.value,a=(t[0],t[1]);if(a)if(a.template.isEquipment)P.deck.push(new s(a.template.invTemplate));else for(var i,o=r(a.cards);!(i=o()).done;){var c=i.value;P.deck.push(c)}}for(var h,l=r(P.slots);!(h=l()).done;){var f=h.value,p=f[0],w=f[1],m=0;if("mhand"==p&&(m=1),"ohand"!=p||"weap2"!=w.template.type)for(var y=m;y<w.cards.length;y++)P.deck.push(w.cards[y])}H(),P.hand.has(P.mhand.template.weapon)||F();P.hand.size<P.drawCount&&z(P.drawCount-P.hand.size);for(var b,k=r(g());!(b=k()).done;){var x=b.value;x.nextAction>v&&A("/sched/unit",{unit:x,when:x.nextAction})}D=!0,P.scheduleDraw()},damagePlayer:function(e){var n=P.hp;e.actual=e.raw,P.hp-=e.actual,A("/u/health_lost",{before:n,now:P.hp,damage:e})},damageUnit:function(e,n){var t=e.hp;n.actual=n.raw,e.hp-=n.actual,A("/unit/health_lost",{unit:e,before:t,now:e.hp,damage:n}),e.invalidate()},draw:function(){var e=P.hand.maxSize-P.hand.size,n=Math.min(e,P.drawCount);n=Math.min(n,P.available),P.drawAvailable=!1,P.scheduleDraw(),z(n)},healPlayer:function(e){var n=P.hp;P.hp=Math.min(n+e,P.hpMax),A("/u/health_gained",{before:n,now:P.hp,amount:e})},makeWeapon:F,play:function(e,n){return new h(e,n)},pub:A,shuffle:H,spawn:function(e,n){var t=new f(e);t.position=n,t.template.speed>0&&(t.nextAction=v+t.template.speed+l(_));D&&t.nextAction>v&&A("/sched/unit",{unit:t,when:t.nextAction});return t.identifier=I++,w.set(n,t),t},subscribe:M,unow:function(){return v},ustep:function(){return++v}}),o._RF.push({},"981eePNGV5LHY9QvBjHpVq0","NHWC",void 0);var v=0,p=e("NHWC",(function(){})),w=(new Array,new Map);function g(){return w.values()}var m=i("nextDraw"),y=i("drawAvailable"),b=e("Player",function(){var e=r.prototype;function r(){this.drawInterval=20,this.drawCount=5,this.hand=new c,this.deck=new Array,this.discard=new Array,Object.defineProperty(this,m,{writable:!0,value:0}),Object.defineProperty(this,y,{writable:!0,value:!1}),this.inventorySize=30,this.inventory=new Array,this.slots=new Map,this.hpMax=16,this.hp=this.hpMax;for(var e=0;e<this.inventorySize;e++)this.inventory.push(null)}return e.items=n().mark((function(){var e,t;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=this.inventory,t=0;case 2:if(!(t<e.length)){n.next=8;break}return n.next=5,[t,e[t]];case 5:t++,n.next=2;break;case 8:case"end":return n.stop()}}),e,this)})),e.give=function(e){for(var n=0;n<this.inventory.length;n++)if(!this.inventory[n])return void(this.inventory[n]=e);throw"inventory is full!!!"},e.scheduleDraw=function(){t(this,m)[m]=v+this.drawInterval,A("/sched/draw",this.nextDraw)},e.equip=function(e,n){e.slot=n,this.slots.set(n,e),"mhand"==n&&(e.cards[0].rebound=!0)},a(r,[{key:"drawAvailable",get:function(){return t(this,y)[y]},set:function(e){t(this,y)[y]=e,A("/draw/available",e)}},{key:"mhand",get:function(){return this.slots.get("mhand")}},{key:"nextDraw",get:function(){return t(this,m)[m]}},{key:"available",get:function(){return this.deck.length+this.discard.length}}]),r}()),k=new Map,x=new Set(["/card/drag","/preview"]);function A(e,n){x.has(e)||console.debug("pub -> "+e+" -> ",n);var t=k.get(e);if((null==t?void 0:t.length)>0)for(var a,i=r(t);!(a=i()).done;){(0,a.value)(n)}}var C=e("Publisher",function(){function e(e){this.topic=void 0,this.topic=e}return e.prototype.pub=function(e){A(this.topic,e)},e}());function M(e,n){var t,a=null!=(t=k.get(e))?t:[];0==a.length&&k.set(e,a),a.push(n)}var P=e("u",new b);e("g",new p);function H(){for(var e,n=r(P.discard);!(e=n()).done;){var t=e.value;P.deck.push(t)}P.discard.length=0,function(e){for(var n=e.length-1;n>0;n--){var t=Math.floor(Math.random()*(n+1)),a=e[n];e[n]=e[t],e[t]=a}}(P.deck)}function z(e){for(var n=[],t=0;t<e;t++){if(0==P.deck.length){if(0==P.discard.length)break;H()}var a=P.deck[P.deck.length-1];P.deck.length--,a.onDraw(),P.hand.add(a),n.push(a)}A("/card/draw",{cards:n,source:"deck"})}var D=!1,I=1,_={n:2,d:3};function F(){var e=P.mhand.cards[0];P.hand.add(e),A("/card/draw",{cards:[e],source:"weapon"})}M("/unit/death",(function(e){w.delete(e.position),0==w.size&&A("/encounter/complete",!0)})),o._RF.pop()}}}));

System.register("chunks:///_virtual/OrbView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,i,s,o,a,c;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){r=t.cclegacy,i=t._decorator,s=t.Graphics,o=t.UITransform,a=t.tween,c=t.Component}],execute:function(){var u;r._RF.push({},"4a9381QHu1Pe7GpVAfP7bZL","OrbView",void 0);var l=i.ccclass;i.property,t("OrbView",l("OrbView")(u=function(t){function r(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).mask=void 0,e.current=1,e.currentTween=null,e}e(r,t);var i=r.prototype;return i.start=function(){},i.update=function(t){},n(r,[{key:"value",get:function(){return this.current},set:function(t){this.current=t,this.mask=this.node.getChildByName("Mask").getComponent(s);var e=this.node.getChildByName("Mask").getComponent(o).contentSize.height;this.mask.clear(),this.mask.lineWidth=10,this.mask.fillColor.fromHEX("#ff0000"),this.mask.fillRect(-120,-e/2,240,e*t)}},{key:"norm",set:function(t){var e;null==(e=this.currentTween)||e.stop(),this.currentTween=a(this).to(.1,{value:t}).start()}}]),r}(c))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayConductor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ai.ts","./NHWC.ts"],(function(t){var e,i,a,n,s,r,h,c,o,d,u,l;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy},function(t){a=t.act},function(t){n=t.unow,s=t.ustep,r=t.u,h=t.allUnits,c=t.pub,o=t.makeWeapon,d=t.damageUnit,u=t.damagePlayer,l=t.healPlayer}],execute:function(){i._RF.push({},"243539qCx1L3rq71QQXSKDI","PlayConductor",void 0);t("PlayConductor",function(){function t(t,e){this.card=void 0,this.target=void 0,this.unit=void 0,this.nextAction=0,this.steps=new Array,this.cards=new Array,this.mode="executingActions",this.advanceTo=void 0,this.publishTime=!1,this.pushCard(t,e)}var i=t.prototype;return i.advanceTime=function(){if(n()==this.advanceTo)return this.mode="executingActions",void this.playNextAction();this.publishTime=!0;for(var t=n();t<this.advanceTo;){t=s(),r.nextDraw==t&&(r.drawAvailable=!0,this.pushStep({drawAvailable:!0}));for(var i,o=e(h());!(i=o()).done;){var d=i.value;if(d.nextAction==t)return this.unit=d,a(d,this),this.unit=null,this.pushStep({enemyAction:!0}),d.nextAction=t+d.template.speed,c("/sched/unit",{unit:d,when:d.nextAction}),void c("/unit/act",d)}}},i.playNextAction=function(){if(0!=this.cards.length){var t=this.cards[this.cards.length-1];if(t.actionIndex>=t.card.template.actions.length)return this.cards.length--,this.advanceTo=n()+t.card.template.time,this.mode="advancing",void this.advanceTime();var e=t.card;this.card=e,this.target=t.target,0==t.actionIndex&&(e.useCharges--,c("/card/played",e),0==e.useCharges?r.hand.remove(e,"destroy"):e.rebound?(r.hand.remove(e,"retain"),o()):(r.discard.push(e),r.hand.remove(e,"discard"),c("/card/discard",{card:e,why:"play"}))),e.template.actions[t.actionIndex++](this)}},i.step=function(){if(this.publishTime&&(c("/time",n()),this.publishTime=!1),0==this.steps.length&&("executingActions"==this.mode?this.playNextAction():this.advanceTime()),0==this.steps.length)return this.publishTime&&c("/time",n()),null;var t=this.steps[this.steps.length-1];return t.damage&&d(t.damage.target,t.damage.value),t.damagePlayer&&u(t.damagePlayer.value),t.healPlayer&&l(t.healPlayer),this.steps.length--,t},i.pushStep=function(t){this.steps.push(t)},i.pushCard=function(t,e){this.cards.push({card:t,target:e,actionIndex:0})},i._old=function(){},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/PotionView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,o,r,l,n,a,c,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,n=e._decorator,a=e.Sprite,c=e.Color,u=e.Component}],execute:function(){var p,s,b,f,y,d,h,w,g;l._RF.push({},"7abd5OYlfFOxKlWZmn2/HKm","PotionView",void 0);var m=n.ccclass,v=(n.property,n.type);e("PotionView",(p=m("PotionView"),s=v(a),b=v(a),f=v(c),p((h=i((d=function(e){function i(){for(var i,t=arguments.length,l=new Array(t),n=0;n<t;n++)l[n]=arguments[n];return i=e.call.apply(e,[this].concat(l))||this,o(i,"liquid",h,r(i)),o(i,"bottle",w,r(i)),o(i,"color",g,r(i)),i}return t(i,e),i.prototype.start=function(){this.liquid.color=this.color},i}(u)).prototype,"liquid",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=i(d.prototype,"bottle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=i(d.prototype,"color",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=d))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/rng.ts",["cc"],(function(n){var r;return{setters:[function(n){r=n.cclegacy}],execute:function(){n({$d:function(n){for(var r,t,u=0,d=null!=(r=n.n)?r:1,e=null!=(t=n.bonus)?t:0,c=0;c<d;c++)u+=f(n.d);return u+e},rn1:function(n,r){return i(n)+r},rn2:i,rna:function(n){return n[i(n.length)]},rnd:f,rne3:function(){var n=i(81);if(n<1)return 5;if(n<3)return 4;if(n<7)return 3;if(n<19)return 2;return 1}}),r._RF.push({},"e894bxnrslPW5Lap12526bu","rng",void 0);var t,u,d,e,c=(t=1,u=1,d=1,e=1,function(){var n=((t|=0)+(u|=0)|0)+(e|=0)|0;return e=e+1|0,t=u^u>>>9,u=(d|=0)+(d<<3)|0,d=(d=d<<21|d>>>11)+n|0,(n>>>0)/4294967296});function i(n){return Math.floor(c()*n)}function f(n){return i(n)+1}n("$d2",{n:1,d:2}),n("$d3",{n:1,d:3}),n("$d4",{n:1,d:4}),n("$d6",{n:1,d:6}),n("$d8",{n:1,d:8}),n("$2d2",{n:2,d:2}),n("$2d3",{n:2,d:3}),n("$2d4",{n:2,d:4}),n("$2d6",{n:2,d:6}),n("$2d8",{n:2,d:8});r._RF.pop()}}}));

System.register("chunks:///_virtual/Testing.ts",["cc","./Card.ts","./Item.ts","./rng.ts"],(function(e){var n,i,t,o,s;return{setters:[function(e){n=e.cclegacy},function(e){i=e.CardTemplate,t=e.simpleHealing},function(e){o=e.mkitem},function(e){s=e.$d6}],execute:function(){n._RF.push({},"4e7c7yrAx9NRpOZC0kV+Zpl","Testing",void 0);var r=e("potionCards",{healing:new i("potion of healing",{time:2,useCharges:1,targeting:"none"}).with(t(s))});e("potions",{healing:o("Potion of Healing","potion",{card:r.healing}).describe("A shimmering red potion.").describe("Consuming will restore some hitpoints.")});n._RF.pop()}}}));

System.register("chunks:///_virtual/TimelineView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NHWC.ts"],(function(e){var n,i,t,o,r,a,l,s,u,p,c,d,h,f,m,b,w,v,g;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,l=e._decorator,s=e.Prefab,u=e.Node,p=e.Sprite,c=e.Color,d=e.Label,h=e.UITransform,f=e.instantiate,m=e.tween,b=e.Vec3,w=e.Component},function(e){v=e.subscribe,g=e.unow}],execute:function(){var y,C,z,L,I,P,R,T,A;a._RF.push({},"25bf4acDIdN/IkleXB2mfgQ","TimelineView",void 0);var V=l.ccclass,D=l.property;e("TimelineView",(y=V("TimelineView"),C=D({type:s}),z=D({type:s}),L=D({type:u}),y((R=n((P=function(e){function n(){for(var n,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,t(n,"drawCardPrefab",R,o(n)),t(n,"unitGoPrefab",T,o(n)),t(n,"preview",A,o(n)),n.previewLabel=void 0,n.bounds=void 0,n.horizon=20,n.upcoming=new Array,n}i(n,e);var a=n.prototype;return a.highlight=function(e,n){for(var i,t=r(this.upcoming);!(i=t()).done;){var o=i.value;e&&o.unit===e?o.node.getComponentInChildren(p).color=c.YELLOW:o.node.getComponentInChildren(p).color=c.WHITE}},a.start=function(){var e=this;this.previewLabel=this.preview.getComponentInChildren(d),this.previewLabel.enabled=!1,this.bounds=this.node.getComponent(h),v("/time",(function(n){e.sync()})),v("/unit/death",(function(n){for(var i=0;i<e.upcoming.length;i++){var t=e.upcoming[i];if(t.unit===n)return t.node.destroy(),void e.upcoming.splice(i,1)}})),v("/sched/unit",(function(n){var i=f(e.unitGoPrefab),t=n.when;i.position.set(0,e.normalizeAbs(t),0),i.getChildByName("name").getComponent(d).string=n.unit.name+" ("+n.unit.position+")",e.node.addChild(i),e.upcoming.push({node:i,when:t,unit:n.unit})})),v("/sched/draw",(function(n){var i=f(e.drawCardPrefab);i.position.set(0,e.normalizeAbs(n),0),e.node.addChild(i),e.upcoming.push({node:i,when:n})})),v("/card/select",(function(n){var i=e.normalizeRel(n.template.time);e.preview.position=e.preview.position.set(0,i,0),e.previewLabel.enabled=!0})),v("/card/deselect",(function(n){e.previewLabel.enabled=!1}))},a.sync=function(){for(var e,n=[],i=g(),t=r(this.upcoming);!(e=t()).done;){var o=e.value;o.when>i?(n.push(o),m(o.node).to(.1,{position:new b(0,this.normalizeRel(o.when-i),0)}).start()):m(o.node).to(.1,{position:new b(0,this.normalizeRel(o.when-i),0)}).destroySelf().start()}this.upcoming=n},a.normalizeAbs=function(e){return this.normalizeRel(e-g())},a.normalizeRel=function(e){return e/this.horizon*this.bounds.contentSize.height},n}(w)).prototype,"drawCardPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=n(P.prototype,"unitGoPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=n(P.prototype,"preview",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=P))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/Unit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NHWC.ts"],(function(t){var i,n,e,s;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy},function(t){e=t.pub,s=t.unow}],execute:function(){t({isBackRow:function(t){return"Q"==t||"W"==t||"E"==t},isFrontRow:function(t){return"A"==t||"S"==t||"D"==t}}),n._RF.push({},"5881ej/xrBNxpVGD8irdHPO","Unit",void 0);t("UnitActionData",(function(){this.activeWhen=void 0,this.charges=void 0})),t("UnitTemplate",function(){function t(t,i){for(var n in this.name="",this.speed=12,this.level=1,this.hpMax=1,this.actions=new Array,this.name=t,i)this[n]=i[n]}return t.prototype.withAction=function(t){return this.actions.push(t),this},t}()),t("Unit",function(){function t(t){this.template=void 0,this.actionData=void 0,this.onInvalidate=void 0,this.hp=void 0,this.nextAction=0,this.identifier=0,this.position="S",this.template=t,this.actionData=t.actions.map((function(t){return{activeWhen:s()+t.delay,charges:t.charges}})),this.hp=this.template.hpMax}var n=t.prototype;return n.invalidate=function(){var t;null==(t=this.onInvalidate)||t.call(this),this.hp<0&&this.kill()},n.kill=function(){e("/unit/death",this)},i(t,[{key:"hpNorm",get:function(){return this.hp/this.template.hpMax}},{key:"name",get:function(){return this.template.name}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UnitGallery.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,i,o,c;return{setters:[function(e){r=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,i=e.resources,o=e.SpriteFrame,c=e.Component}],execute:function(){var s;t._RF.push({},"d14526HSJpJCIbLiHZQivdd","UnitGallery",void 0);var l=n.ccclass;n.property,e("UnitGallery",l("UnitGallery")(s=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.load=function(e,r){var t=e.replace(".","_");i.load("sprites/units/"+t+"/spriteFrame",o,(function(e,t){r(t)}))},t}(c))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/Units.ts",["./rollupPluginModLoBabelHelpers.js","cc","./rng.ts","./Unit.ts"],(function(n){var e,t,i,r,o,a,c,u;return{setters:[function(n){e=n.createForOfIteratorHelperLoose},function(n){t=n.cclegacy},function(n){i=n.$d,r=n.$2d3,o=n.$d6,a=n.rna,c=n.$d3},function(n){u=n.UnitTemplate}],execute:function(){n({randomUnit:function(n){for(var t,i=[],r=e(Object.getOwnPropertyNames(s));!(t=r()).done;){var o=t.value,c=s[o];n(c)&&i.push(c)}if(0==i.length)throw"no valid candidates";return a(i)},simpleDamageAction:d}),t._RF.push({},"9fd2bf7icxK16DEg8kucJ3n","Units",void 0);var s=n("units",{newt:new u("newt",{hpMax:10}).withAction(d(c)),goblin:new u("goblin",{hpMax:12,speed:14}).withAction(d(r)),caveSpider:new u("cave.spider",{hpMax:12,speed:10}).withAction(d(o))});function d(n){return{action:function(e){return e.pushStep({damagePlayer:{unit:e.unit,value:{raw:i(n)}}})},charges:-1,cooldown:-1,delay:0}}t._RF.pop()}}}));

System.register("chunks:///_virtual/UnitView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HandCardView.ts","./FrameBorder.ts","./OrbView.ts","./NHWC.ts","./UnitGallery.ts"],(function(e){var t,n,i,o,r,l,a,s,c,d,u,h,m,p,b,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Sprite,s=e.Label,c=e.Color,d=e.tween,u=e.Component},function(e){h=e.Hoverable},function(e){m=e.FrameBorder},function(e){p=e.OrbView},function(e){b=e.subscribe},function(e){g=e.UnitGallery}],execute:function(){var f,v,y,w,C,B,A;r._RF.push({},"18c35RnCDlHMIMIswOLyh0g","UnitView",void 0);var N=l.ccclass,O=l.property;e("UnitView",(f=N("UnitView"),v=O({type:String}),y=O({type:a}),f((B=t((C=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,i(t,"position",B,o(t)),i(t,"main",A,o(t)),t.hover=new h(!1),t.border=void 0,t.willAct=void 0,t.model=void 0,t.hpOrb=void 0,t.numberBadge=void 0,t.numberLabel=void 0,t}n(t,e);var r=t.prototype;return r.sync=function(){var e=this;this.node.getChildByName("title").getComponent(s).string=this.model.name+" ("+this.position+")",this.model.onInvalidate=function(){return e.onModelChanged()},this.hpOrb=this.node.getChildByPath("frame/orb").getComponent(p),g.load(this.model.template.name,(function(t){e.node.getChildByName("portrait").getComponent(a).spriteFrame=t}))},r.setModel=function(e){this.model=e,this.node.active&&this.sync()},r.start=function(){var e=this;this.border=this.node.getComponentInChildren(m),this.numberBadge=this.node.getChildByName("number").getComponent(a),this.numberLabel=this.numberBadge.getComponentInChildren(s),this.willAct=this.node.getChildByName("willAct").getComponent(s);var t=this.willAct.color.clone(),n=new c(t.r,t.g,t.b,255);b("/preview",(function(t){var i;t&&t.at>=(null==(i=e.model)?void 0:i.nextAction)?e.willAct.color=n:e.willAct.color=c.TRANSPARENT})),b("/unit/act",(function(t){if(t===e.model){var n=e.node.position.clone(),i=n.clone().add3f(0,-35,0);d(e.node).to(.06,{position:i},{easing:"cubicOut"}).to(.1,{position:n},{easing:"cubicIn"}).start()}})),b("/unit/death",(function(t){t===e.model&&(e.node.active=!1)})),b("/unit/health_lost",(function(t){if(t.unit===e.model){var n,i;e.numberLabel.string=null!=(n=null==(i=t.damage.actual)?void 0:i.toString())?n:"-";var o=new c(20,20,20,255);e.numberBadge.color=o,e.scheduleOnce((function(){e.numberBadge.color=c.TRANSPARENT}),.2)}})),this.model&&this.sync()},r.onModelChanged=function(){this.hpOrb.norm=this.model.hpNorm},t}(u)).prototype,"position",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(C.prototype,"main",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=C))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/Weapons.ts",["cc","./Card.ts","./Item.ts","./rng.ts"],(function(e){var t,s,a,i,n,l,o;return{setters:[function(e){t=e.cclegacy},function(e){s=e.CardTemplate,a=e.simpleDamage},function(e){i=e.mkitem,n=e.multi},function(e){l=e.$d6,o=e.$2d4}],execute:function(){t._RF.push({},"d0c60KUpjRPnLo2kj1ntLaz","Weapons",void 0);var c=e("testing",{slap:new s("slap",{}).with(a(l)),lightSlap:new s("light.slap",{time:2}).with(a({d:2,bonus:1})),heavySlap:new s("heavy.slap",{time:6}).with(a(o))});e("testingItems",{heavyGloves:i("Gauntlets of Dueling","gloves",n(3,c.slap),n(3,c.lightSlap),n(2,c.heavySlap)).describe("When faced with no options one can always fall back on the classic glove-slap.").describe("").describe("<i>Note to self:</i>").describe("<i>Don't bring a silk glove to a gauntlet fight.</i>"),lightGloves:i("Basic leather gloves","gloves",n(2,c.slap),n(2,c.lightSlap)).describe("Supple, fashionable, not much protection.")}),e("weapons",{broadsword:new s("broadsword",{}),fists:i("fists","weap1",{card:new s("punch",{}).with(a({d:4,bonus:-1}))})});t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});